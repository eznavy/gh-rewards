{"version":3,"file":"index.js","sources":["../dist-src/version.js","../dist-src/add-event-handler.js","../dist-src/oauth-app-octokit.js","../dist-src/emit-event.js","../dist-src/methods/get-user-octokit.js","../dist-src/methods/get-web-flow-authorization-url.js","../dist-src/methods/create-token.js","../dist-src/methods/check-token.js","../dist-src/methods/reset-token.js","../dist-src/methods/refresh-token.js","../dist-src/methods/scope-token.js","../dist-src/methods/delete-token.js","../dist-src/methods/delete-authorization.js","../dist-src/middleware/handle-request.js","../dist-src/middleware/node/parse-request.js","../dist-src/middleware/node/send-response.js","../dist-src/middleware/on-unhandled-request-default.js","../dist-src/middleware/node/index.js","../dist-src/middleware/web-worker/parse-request.js","../dist-src/middleware/web-worker/send-response.js","../dist-src/middleware/web-worker/index.js","../dist-src/middleware/aws-lambda/api-gateway-v2-parse-request.js","../dist-src/middleware/aws-lambda/api-gateway-v2-send-response.js","../dist-src/middleware/aws-lambda/api-gateway-v2.js","../dist-src/index.js"],"sourcesContent":["export const VERSION = \"4.2.1\";\n","export function addEventHandler(state, eventName, eventHandler) {\n    if (Array.isArray(eventName)) {\n        for (const singleEventName of eventName) {\n            addEventHandler(state, singleEventName, eventHandler);\n        }\n        return;\n    }\n    if (!state.eventHandlers[eventName]) {\n        state.eventHandlers[eventName] = [];\n    }\n    state.eventHandlers[eventName].push(eventHandler);\n}\n","import { Octokit } from \"@octokit/core\";\nimport { getUserAgent } from \"universal-user-agent\";\nimport { VERSION } from \"./version\";\nexport const OAuthAppOctokit = Octokit.defaults({\n    userAgent: `octokit-oauth-app.js/${VERSION} ${getUserAgent()}`,\n});\n","export async function emitEvent(state, context) {\n    const { name, action } = context;\n    if (state.eventHandlers[`${name}.${action}`]) {\n        for (const eventHandler of state.eventHandlers[`${name}.${action}`]) {\n            await eventHandler(context);\n        }\n    }\n    if (state.eventHandlers[name]) {\n        for (const eventHandler of state.eventHandlers[name]) {\n            await eventHandler(context);\n        }\n    }\n}\n","import { createOAuthUserAuth, } from \"@octokit/auth-oauth-user\";\nimport { emitEvent } from \"../emit-event\";\nexport async function getUserOctokitWithState(state, options) {\n    return state.octokit.auth({\n        type: \"oauth-user\",\n        ...options,\n        async factory(options) {\n            const octokit = new state.Octokit({\n                authStrategy: createOAuthUserAuth,\n                auth: options,\n            });\n            const authentication = (await octokit.auth({\n                type: \"get\",\n            }));\n            await emitEvent(state, {\n                name: \"token\",\n                action: \"created\",\n                token: authentication.token,\n                scopes: authentication.scopes,\n                authentication,\n                octokit,\n            });\n            return octokit;\n        },\n    });\n}\n","import * as OAuthMethods from \"@octokit/oauth-methods\";\nexport function getWebFlowAuthorizationUrlWithState(state, options) {\n    const optionsWithDefaults = {\n        clientId: state.clientId,\n        request: state.octokit.request,\n        ...options,\n        allowSignup: state.allowSignup ?? options.allowSignup,\n        redirectUrl: options.redirectUrl ?? state.redirectUrl,\n        scopes: options.scopes ?? state.defaultScopes,\n    };\n    return OAuthMethods.getWebFlowAuthorizationUrl({\n        clientType: state.clientType,\n        ...optionsWithDefaults,\n    });\n}\n","import * as OAuthAppAuth from \"@octokit/auth-oauth-app\";\nimport { emitEvent } from \"../emit-event\";\nexport async function createTokenWithState(state, options) {\n    const authentication = await state.octokit.auth({\n        type: \"oauth-user\",\n        ...options,\n    });\n    await emitEvent(state, {\n        name: \"token\",\n        action: \"created\",\n        token: authentication.token,\n        scopes: authentication.scopes,\n        authentication,\n        octokit: new state.Octokit({\n            authStrategy: OAuthAppAuth.createOAuthUserAuth,\n            auth: {\n                clientType: state.clientType,\n                clientId: state.clientId,\n                clientSecret: state.clientSecret,\n                token: authentication.token,\n                scopes: authentication.scopes,\n                refreshToken: authentication.refreshToken,\n                expiresAt: authentication.expiresAt,\n                refreshTokenExpiresAt: authentication.refreshTokenExpiresAt,\n            },\n        }),\n    });\n    return { authentication };\n}\n","import * as OAuthMethods from \"@octokit/oauth-methods\";\nexport async function checkTokenWithState(state, options) {\n    const result = await OAuthMethods.checkToken({\n        // @ts-expect-error not worth the extra code to appease TS\n        clientType: state.clientType,\n        clientId: state.clientId,\n        clientSecret: state.clientSecret,\n        request: state.octokit.request,\n        ...options,\n    });\n    Object.assign(result.authentication, { type: \"token\", tokenType: \"oauth\" });\n    return result;\n}\n","import * as OAuthMethods from \"@octokit/oauth-methods\";\nimport { emitEvent } from \"../emit-event\";\nimport { createOAuthUserAuth } from \"@octokit/auth-oauth-user\";\nexport async function resetTokenWithState(state, options) {\n    const optionsWithDefaults = {\n        clientId: state.clientId,\n        clientSecret: state.clientSecret,\n        request: state.octokit.request,\n        ...options,\n    };\n    if (state.clientType === \"oauth-app\") {\n        const response = await OAuthMethods.resetToken({\n            clientType: \"oauth-app\",\n            ...optionsWithDefaults,\n        });\n        const authentication = Object.assign(response.authentication, {\n            type: \"token\",\n            tokenType: \"oauth\",\n        });\n        await emitEvent(state, {\n            name: \"token\",\n            action: \"reset\",\n            token: response.authentication.token,\n            scopes: response.authentication.scopes || undefined,\n            authentication: authentication,\n            octokit: new state.Octokit({\n                authStrategy: createOAuthUserAuth,\n                auth: {\n                    clientType: state.clientType,\n                    clientId: state.clientId,\n                    clientSecret: state.clientSecret,\n                    token: response.authentication.token,\n                    scopes: response.authentication.scopes,\n                },\n            }),\n        });\n        return { ...response, authentication };\n    }\n    const response = await OAuthMethods.resetToken({\n        clientType: \"github-app\",\n        ...optionsWithDefaults,\n    });\n    const authentication = Object.assign(response.authentication, {\n        type: \"token\",\n        tokenType: \"oauth\",\n    });\n    await emitEvent(state, {\n        name: \"token\",\n        action: \"reset\",\n        token: response.authentication.token,\n        authentication: authentication,\n        octokit: new state.Octokit({\n            authStrategy: createOAuthUserAuth,\n            auth: {\n                clientType: state.clientType,\n                clientId: state.clientId,\n                clientSecret: state.clientSecret,\n                token: response.authentication.token,\n            },\n        }),\n    });\n    return { ...response, authentication };\n}\n","import * as OAuthMethods from \"@octokit/oauth-methods\";\nimport { emitEvent } from \"../emit-event\";\nimport { createOAuthUserAuth } from \"@octokit/auth-oauth-user\";\nexport async function refreshTokenWithState(state, options) {\n    if (state.clientType === \"oauth-app\") {\n        throw new Error(\"[@octokit/oauth-app] app.refreshToken() is not supported for OAuth Apps\");\n    }\n    const response = await OAuthMethods.refreshToken({\n        clientType: \"github-app\",\n        clientId: state.clientId,\n        clientSecret: state.clientSecret,\n        request: state.octokit.request,\n        refreshToken: options.refreshToken,\n    });\n    const authentication = Object.assign(response.authentication, {\n        type: \"token\",\n        tokenType: \"oauth\",\n    });\n    await emitEvent(state, {\n        name: \"token\",\n        action: \"refreshed\",\n        token: response.authentication.token,\n        authentication: authentication,\n        octokit: new state.Octokit({\n            authStrategy: createOAuthUserAuth,\n            auth: {\n                clientType: state.clientType,\n                clientId: state.clientId,\n                clientSecret: state.clientSecret,\n                token: response.authentication.token,\n            },\n        }),\n    });\n    return { ...response, authentication };\n}\n","import * as OAuthMethods from \"@octokit/oauth-methods\";\nimport { createOAuthUserAuth } from \"@octokit/auth-oauth-user\";\nimport { emitEvent } from \"../emit-event\";\nexport async function scopeTokenWithState(state, options) {\n    if (state.clientType === \"oauth-app\") {\n        throw new Error(\"[@octokit/oauth-app] app.scopeToken() is not supported for OAuth Apps\");\n    }\n    const response = await OAuthMethods.scopeToken({\n        clientType: \"github-app\",\n        clientId: state.clientId,\n        clientSecret: state.clientSecret,\n        request: state.octokit.request,\n        ...options,\n    });\n    const authentication = Object.assign(response.authentication, {\n        type: \"token\",\n        tokenType: \"oauth\",\n    });\n    await emitEvent(state, {\n        name: \"token\",\n        action: \"scoped\",\n        token: response.authentication.token,\n        authentication: authentication,\n        octokit: new state.Octokit({\n            authStrategy: createOAuthUserAuth,\n            auth: {\n                clientType: state.clientType,\n                clientId: state.clientId,\n                clientSecret: state.clientSecret,\n                token: response.authentication.token,\n            },\n        }),\n    });\n    return { ...response, authentication };\n}\n","import * as OAuthMethods from \"@octokit/oauth-methods\";\nimport { createUnauthenticatedAuth } from \"@octokit/auth-unauthenticated\";\nimport { emitEvent } from \"../emit-event\";\nexport async function deleteTokenWithState(state, options) {\n    const optionsWithDefaults = {\n        clientId: state.clientId,\n        clientSecret: state.clientSecret,\n        request: state.octokit.request,\n        ...options,\n    };\n    const response = state.clientType === \"oauth-app\"\n        ? await OAuthMethods.deleteToken({\n            clientType: \"oauth-app\",\n            ...optionsWithDefaults,\n        })\n        : // istanbul ignore next\n            await OAuthMethods.deleteToken({\n                clientType: \"github-app\",\n                ...optionsWithDefaults,\n            });\n    await emitEvent(state, {\n        name: \"token\",\n        action: \"deleted\",\n        token: options.token,\n        octokit: new state.Octokit({\n            authStrategy: createUnauthenticatedAuth,\n            auth: {\n                reason: `Handling \"token.deleted\" event. The access for the token has been revoked.`,\n            },\n        }),\n    });\n    return response;\n}\n","import * as OAuthMethods from \"@octokit/oauth-methods\";\nimport { createUnauthenticatedAuth } from \"@octokit/auth-unauthenticated\";\nimport { emitEvent } from \"../emit-event\";\nexport async function deleteAuthorizationWithState(state, options) {\n    const optionsWithDefaults = {\n        clientId: state.clientId,\n        clientSecret: state.clientSecret,\n        request: state.octokit.request,\n        ...options,\n    };\n    const response = state.clientType === \"oauth-app\"\n        ? await OAuthMethods.deleteAuthorization({\n            clientType: \"oauth-app\",\n            ...optionsWithDefaults,\n        })\n        : // istanbul ignore next\n            await OAuthMethods.deleteAuthorization({\n                clientType: \"github-app\",\n                ...optionsWithDefaults,\n            });\n    await emitEvent(state, {\n        name: \"token\",\n        action: \"deleted\",\n        token: options.token,\n        octokit: new state.Octokit({\n            authStrategy: createUnauthenticatedAuth,\n            auth: {\n                reason: `Handling \"token.deleted\" event. The access for the token has been revoked.`,\n            },\n        }),\n    });\n    await emitEvent(state, {\n        name: \"authorization\",\n        action: \"deleted\",\n        token: options.token,\n        octokit: new state.Octokit({\n            authStrategy: createUnauthenticatedAuth,\n            auth: {\n                reason: `Handling \"authorization.deleted\" event. The access for the app has been revoked.`,\n            },\n        }),\n    });\n    return response;\n}\n","// @ts-ignore - requires esModuleInterop flag\nimport fromEntries from \"fromentries\";\nexport async function handleRequest(app, { pathPrefix = \"/api/github/oauth\" }, request) {\n    if (request.method === \"OPTIONS\") {\n        return {\n            status: 200,\n            headers: {\n                \"access-control-allow-origin\": \"*\",\n                \"access-control-allow-methods\": \"*\",\n                \"access-control-allow-headers\": \"Content-Type, User-Agent, Authorization\",\n            },\n        };\n    }\n    // request.url may include ?query parameters which we don't want for `route`\n    // hence the workaround using new URL()\n    const { pathname } = new URL(request.url, \"http://localhost\");\n    const route = [request.method, pathname].join(\" \");\n    const routes = {\n        getLogin: `GET ${pathPrefix}/login`,\n        getCallback: `GET ${pathPrefix}/callback`,\n        createToken: `POST ${pathPrefix}/token`,\n        getToken: `GET ${pathPrefix}/token`,\n        patchToken: `PATCH ${pathPrefix}/token`,\n        patchRefreshToken: `PATCH ${pathPrefix}/refresh-token`,\n        scopeToken: `POST ${pathPrefix}/token/scoped`,\n        deleteToken: `DELETE ${pathPrefix}/token`,\n        deleteGrant: `DELETE ${pathPrefix}/grant`,\n    };\n    // handle unknown routes\n    if (!Object.values(routes).includes(route)) {\n        return null;\n    }\n    let json;\n    try {\n        const text = await request.text();\n        json = text ? JSON.parse(text) : {};\n    }\n    catch (error) {\n        return {\n            status: 400,\n            headers: {\n                \"content-type\": \"application/json\",\n                \"access-control-allow-origin\": \"*\",\n            },\n            text: JSON.stringify({\n                error: \"[@octokit/oauth-app] request error\",\n            }),\n        };\n    }\n    const { searchParams } = new URL(request.url, \"http://localhost\");\n    const query = fromEntries(searchParams);\n    const headers = request.headers;\n    try {\n        if (route === routes.getLogin) {\n            const { url } = app.getWebFlowAuthorizationUrl({\n                state: query.state,\n                scopes: query.scopes ? query.scopes.split(\",\") : undefined,\n                allowSignup: query.allowSignup\n                    ? query.allowSignup === \"true\"\n                    : undefined,\n                redirectUrl: query.redirectUrl,\n            });\n            return { status: 302, headers: { location: url } };\n        }\n        if (route === routes.getCallback) {\n            if (query.error) {\n                throw new Error(`[@octokit/oauth-app] ${query.error} ${query.error_description}`);\n            }\n            if (!query.code) {\n                throw new Error('[@octokit/oauth-app] \"code\" parameter is required');\n            }\n            const { authentication: { token }, } = await app.createToken({\n                code: query.code,\n            });\n            return {\n                status: 200,\n                headers: {\n                    \"content-type\": \"text/html\",\n                },\n                text: `<h1>Token created successfully</h1>\n    \n<p>Your token is: <strong>${token}</strong>. Copy it now as it cannot be shown again.</p>`,\n            };\n        }\n        if (route === routes.createToken) {\n            const { code, redirectUrl } = json;\n            if (!code) {\n                throw new Error('[@octokit/oauth-app] \"code\" parameter is required');\n            }\n            const result = await app.createToken({\n                code,\n                redirectUrl,\n            });\n            // @ts-ignore\n            delete result.authentication.clientSecret;\n            return {\n                status: 201,\n                headers: {\n                    \"content-type\": \"application/json\",\n                    \"access-control-allow-origin\": \"*\",\n                },\n                text: JSON.stringify(result),\n            };\n        }\n        if (route === routes.getToken) {\n            const token = headers.authorization?.substr(\"token \".length);\n            if (!token) {\n                throw new Error('[@octokit/oauth-app] \"Authorization\" header is required');\n            }\n            const result = await app.checkToken({\n                token,\n            });\n            // @ts-ignore\n            delete result.authentication.clientSecret;\n            return {\n                status: 200,\n                headers: {\n                    \"content-type\": \"application/json\",\n                    \"access-control-allow-origin\": \"*\",\n                },\n                text: JSON.stringify(result),\n            };\n        }\n        if (route === routes.patchToken) {\n            const token = headers.authorization?.substr(\"token \".length);\n            if (!token) {\n                throw new Error('[@octokit/oauth-app] \"Authorization\" header is required');\n            }\n            const result = await app.resetToken({ token });\n            // @ts-ignore\n            delete result.authentication.clientSecret;\n            return {\n                status: 200,\n                headers: {\n                    \"content-type\": \"application/json\",\n                    \"access-control-allow-origin\": \"*\",\n                },\n                text: JSON.stringify(result),\n            };\n        }\n        if (route === routes.patchRefreshToken) {\n            const token = headers.authorization?.substr(\"token \".length);\n            if (!token) {\n                throw new Error('[@octokit/oauth-app] \"Authorization\" header is required');\n            }\n            const { refreshToken } = json;\n            if (!refreshToken) {\n                throw new Error(\"[@octokit/oauth-app] refreshToken must be sent in request body\");\n            }\n            const result = await app.refreshToken({ refreshToken });\n            // @ts-ignore\n            delete result.authentication.clientSecret;\n            return {\n                status: 200,\n                headers: {\n                    \"content-type\": \"application/json\",\n                    \"access-control-allow-origin\": \"*\",\n                },\n                text: JSON.stringify(result),\n            };\n        }\n        if (route === routes.scopeToken) {\n            const token = headers.authorization?.substr(\"token \".length);\n            if (!token) {\n                throw new Error('[@octokit/oauth-app] \"Authorization\" header is required');\n            }\n            const result = await app.scopeToken({\n                token,\n                ...json,\n            });\n            // @ts-ignore\n            delete result.authentication.clientSecret;\n            return {\n                status: 200,\n                headers: {\n                    \"content-type\": \"application/json\",\n                    \"access-control-allow-origin\": \"*\",\n                },\n                text: JSON.stringify(result),\n            };\n        }\n        if (route === routes.deleteToken) {\n            const token = headers.authorization?.substr(\"token \".length);\n            if (!token) {\n                throw new Error('[@octokit/oauth-app] \"Authorization\" header is required');\n            }\n            await app.deleteToken({\n                token,\n            });\n            return {\n                status: 204,\n                headers: { \"access-control-allow-origin\": \"*\" },\n            };\n        }\n        // route === routes.deleteGrant\n        const token = headers.authorization?.substr(\"token \".length);\n        if (!token) {\n            throw new Error('[@octokit/oauth-app] \"Authorization\" header is required');\n        }\n        await app.deleteAuthorization({\n            token,\n        });\n        return {\n            status: 204,\n            headers: { \"access-control-allow-origin\": \"*\" },\n        };\n    }\n    catch (error) {\n        return {\n            status: 400,\n            headers: {\n                \"content-type\": \"application/json\",\n                \"access-control-allow-origin\": \"*\",\n            },\n            text: JSON.stringify({ error: error.message }),\n        };\n    }\n}\n","export function parseRequest(request) {\n    const { method, url, headers } = request;\n    async function text() {\n        const text = await new Promise((resolve, reject) => {\n            let bodyChunks = [];\n            request\n                .on(\"error\", reject)\n                .on(\"data\", (chunk) => bodyChunks.push(chunk))\n                .on(\"end\", () => resolve(Buffer.concat(bodyChunks).toString()));\n        });\n        return text;\n    }\n    return { method, url, headers, text };\n}\n","export function sendResponse(octokitResponse, response) {\n    response.writeHead(octokitResponse.status, octokitResponse.headers);\n    response.end(octokitResponse.text);\n}\n","export function onUnhandledRequestDefault(request) {\n    return {\n        status: 404,\n        headers: { \"content-type\": \"application/json\" },\n        text: JSON.stringify({\n            error: `Unknown route: ${request.method} ${request.url}`,\n        }),\n    };\n}\n","import { parseRequest } from \"./parse-request\";\nimport { sendResponse } from \"./send-response\";\nimport { onUnhandledRequestDefault } from \"../on-unhandled-request-default\";\nimport { handleRequest } from \"../handle-request\";\nfunction onUnhandledRequestDefaultNode(request, response) {\n    const octokitRequest = parseRequest(request);\n    const octokitResponse = onUnhandledRequestDefault(octokitRequest);\n    sendResponse(octokitResponse, response);\n}\nexport function createNodeMiddleware(app, { pathPrefix, onUnhandledRequest, } = {}) {\n    if (onUnhandledRequest) {\n        app.octokit.log.warn(\"[@octokit/oauth-app] `onUnhandledRequest` is deprecated and will be removed from the next major version.\");\n    }\n    onUnhandledRequest ?? (onUnhandledRequest = onUnhandledRequestDefaultNode);\n    return async function (request, response, next) {\n        const octokitRequest = parseRequest(request);\n        const octokitResponse = await handleRequest(app, { pathPrefix }, octokitRequest);\n        if (octokitResponse) {\n            sendResponse(octokitResponse, response);\n        }\n        else if (typeof next === \"function\") {\n            next();\n        }\n        else {\n            onUnhandledRequest(request, response);\n        }\n    };\n}\n","export function parseRequest(request) {\n    // @ts-ignore Worker environment supports fromEntries/entries.\n    const headers = Object.fromEntries(request.headers.entries());\n    return {\n        method: request.method,\n        url: request.url,\n        headers,\n        text: () => request.text(),\n    };\n}\n","export function sendResponse(octokitResponse) {\n    return new Response(octokitResponse.text, {\n        status: octokitResponse.status,\n        headers: octokitResponse.headers,\n    });\n}\n","import { parseRequest } from \"./parse-request\";\nimport { sendResponse } from \"./send-response\";\nimport { handleRequest } from \"../handle-request\";\nimport { onUnhandledRequestDefault } from \"../on-unhandled-request-default\";\nasync function onUnhandledRequestDefaultWebWorker(request) {\n    const octokitRequest = parseRequest(request);\n    const octokitResponse = onUnhandledRequestDefault(octokitRequest);\n    return sendResponse(octokitResponse);\n}\nexport function createWebWorkerHandler(app, { pathPrefix, onUnhandledRequest, } = {}) {\n    if (onUnhandledRequest) {\n        app.octokit.log.warn(\"[@octokit/oauth-app] `onUnhandledRequest` is deprecated and will be removed from the next major version.\");\n    }\n    onUnhandledRequest ?? (onUnhandledRequest = onUnhandledRequestDefaultWebWorker);\n    return async function (request) {\n        const octokitRequest = parseRequest(request);\n        const octokitResponse = await handleRequest(app, { pathPrefix }, octokitRequest);\n        return octokitResponse\n            ? sendResponse(octokitResponse)\n            : await onUnhandledRequest(request);\n    };\n}\n/** @deprecated */\nexport function createCloudflareHandler(...args) {\n    args[0].octokit.log.warn(\"[@octokit/oauth-app] `createCloudflareHandler` is deprecated, use `createWebWorkerHandler` instead\");\n    return createWebWorkerHandler(...args);\n}\n","export function parseRequest(request) {\n    const { method } = request.requestContext.http;\n    let url = request.rawPath;\n    const { stage } = request.requestContext;\n    if (url.startsWith(\"/\" + stage))\n        url = url.substring(stage.length + 1);\n    if (request.rawQueryString)\n        url += \"?\" + request.rawQueryString;\n    const headers = request.headers;\n    const text = async () => request.body || \"\";\n    return { method, url, headers, text };\n}\n","export function sendResponse(octokitResponse) {\n    return {\n        statusCode: octokitResponse.status,\n        headers: octokitResponse.headers,\n        body: octokitResponse.text,\n    };\n}\n","import { parseRequest } from \"./api-gateway-v2-parse-request\";\nimport { sendResponse } from \"./api-gateway-v2-send-response\";\nimport { handleRequest } from \"../handle-request\";\nimport { onUnhandledRequestDefault } from \"../on-unhandled-request-default\";\nasync function onUnhandledRequestDefaultAWSAPIGatewayV2(event) {\n    const request = parseRequest(event);\n    const response = onUnhandledRequestDefault(request);\n    return sendResponse(response);\n}\nexport function createAWSLambdaAPIGatewayV2Handler(app, { pathPrefix, onUnhandledRequest, } = {}) {\n    if (onUnhandledRequest) {\n        app.octokit.log.warn(\"[@octokit/oauth-app] `onUnhandledRequest` is deprecated and will be removed from the next major version.\");\n    }\n    onUnhandledRequest ?? (onUnhandledRequest = onUnhandledRequestDefaultAWSAPIGatewayV2);\n    return async function (event) {\n        const request = parseRequest(event);\n        const response = await handleRequest(app, { pathPrefix }, request);\n        return response ? sendResponse(response) : onUnhandledRequest(event);\n    };\n}\n","import { createOAuthAppAuth } from \"@octokit/auth-oauth-app\";\nimport { VERSION } from \"./version\";\nimport { addEventHandler } from \"./add-event-handler\";\nimport { OAuthAppOctokit } from \"./oauth-app-octokit\";\nimport { getUserOctokitWithState, } from \"./methods/get-user-octokit\";\nimport { getWebFlowAuthorizationUrlWithState, } from \"./methods/get-web-flow-authorization-url\";\nimport { createTokenWithState, } from \"./methods/create-token\";\nimport { checkTokenWithState, } from \"./methods/check-token\";\nimport { resetTokenWithState, } from \"./methods/reset-token\";\nimport { refreshTokenWithState, } from \"./methods/refresh-token\";\nimport { scopeTokenWithState, } from \"./methods/scope-token\";\nimport { deleteTokenWithState, } from \"./methods/delete-token\";\nimport { deleteAuthorizationWithState, } from \"./methods/delete-authorization\";\n// generic handlers\nexport { handleRequest } from \"./middleware/handle-request\";\nexport { createNodeMiddleware } from \"./middleware/node/index\";\nexport { createCloudflareHandler, createWebWorkerHandler, } from \"./middleware/web-worker/index\";\nexport { createAWSLambdaAPIGatewayV2Handler } from \"./middleware/aws-lambda/api-gateway-v2\";\nclass OAuthApp {\n    static defaults(defaults) {\n        const OAuthAppWithDefaults = class extends this {\n            constructor(...args) {\n                super({\n                    ...defaults,\n                    ...args[0],\n                });\n            }\n        };\n        return OAuthAppWithDefaults;\n    }\n    constructor(options) {\n        const Octokit = options.Octokit || OAuthAppOctokit;\n        this.type = (options.clientType ||\n            \"oauth-app\");\n        const octokit = new Octokit({\n            authStrategy: createOAuthAppAuth,\n            auth: {\n                clientType: this.type,\n                clientId: options.clientId,\n                clientSecret: options.clientSecret,\n            },\n        });\n        const state = {\n            clientType: this.type,\n            clientId: options.clientId,\n            clientSecret: options.clientSecret,\n            // @ts-expect-error defaultScopes not permitted for GitHub Apps\n            defaultScopes: options.defaultScopes || [],\n            allowSignup: options.allowSignup,\n            baseUrl: options.baseUrl,\n            redirectUrl: options.redirectUrl,\n            log: options.log,\n            Octokit,\n            octokit,\n            eventHandlers: {},\n        };\n        this.on = addEventHandler.bind(null, state);\n        // @ts-expect-error TODO: figure this out\n        this.octokit = octokit;\n        this.getUserOctokit = getUserOctokitWithState.bind(null, state);\n        this.getWebFlowAuthorizationUrl = getWebFlowAuthorizationUrlWithState.bind(null, state);\n        this.createToken = createTokenWithState.bind(null, state);\n        this.checkToken = checkTokenWithState.bind(null, state);\n        this.resetToken = resetTokenWithState.bind(null, state);\n        this.refreshToken = refreshTokenWithState.bind(null, state);\n        this.scopeToken = scopeTokenWithState.bind(null, state);\n        this.deleteToken = deleteTokenWithState.bind(null, state);\n        this.deleteAuthorization = deleteAuthorizationWithState.bind(null, state);\n    }\n}\nOAuthApp.VERSION = VERSION;\nexport { OAuthApp };\n"],"names":["VERSION","addEventHandler","state","eventName","eventHandler","Array","isArray","singleEventName","eventHandlers","push","OAuthAppOctokit","Octokit","defaults","userAgent","getUserAgent","emitEvent","context","name","action","getUserOctokitWithState","options","octokit","auth","type","factory","authStrategy","createOAuthUserAuth","authentication","token","scopes","getWebFlowAuthorizationUrlWithState","optionsWithDefaults","clientId","request","allowSignup","redirectUrl","defaultScopes","OAuthMethods","clientType","createTokenWithState","OAuthAppAuth","clientSecret","refreshToken","expiresAt","refreshTokenExpiresAt","checkTokenWithState","result","Object","assign","tokenType","resetTokenWithState","response","undefined","refreshTokenWithState","Error","scopeTokenWithState","deleteTokenWithState","createUnauthenticatedAuth","reason","deleteAuthorizationWithState","handleRequest","app","pathPrefix","method","status","headers","pathname","URL","url","route","join","routes","getLogin","getCallback","createToken","getToken","patchToken","patchRefreshToken","scopeToken","deleteToken","deleteGrant","values","includes","json","text","JSON","parse","error","stringify","searchParams","query","fromEntries","_headers$authorizatio6","getWebFlowAuthorizationUrl","split","location","error_description","code","_headers$authorizatio","authorization","substr","length","checkToken","_headers$authorizatio2","resetToken","_headers$authorizatio3","_headers$authorizatio4","_headers$authorizatio5","deleteAuthorization","message","parseRequest","Promise","resolve","reject","bodyChunks","on","chunk","Buffer","concat","toString","sendResponse","octokitResponse","writeHead","end","onUnhandledRequestDefault","onUnhandledRequestDefaultNode","octokitRequest","createNodeMiddleware","onUnhandledRequest","log","warn","next","entries","Response","onUnhandledRequestDefaultWebWorker","createWebWorkerHandler","createCloudflareHandler","args","requestContext","http","rawPath","stage","startsWith","substring","rawQueryString","body","statusCode","onUnhandledRequestDefaultAWSAPIGatewayV2","event","createAWSLambdaAPIGatewayV2Handler","OAuthApp","OAuthAppWithDefaults","constructor","createOAuthAppAuth","baseUrl","bind","getUserOctokit"],"mappings":"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"}